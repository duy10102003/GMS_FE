<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>GaragePro - Qu·∫£n l√Ω ph·ª• t√πng</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
  <link rel="stylesheet" href="/static/css/main_dashboard.css">
</head>
<body>
  <!-- Sidebar -->
  <aside class="sidebar">
    <div class="sidebar-header">
      <div class="logo">
        <span class="orange">Garage</span><span class="dark">Pro</span>
      </div>
    </div>
    <div class="user-profile">
      <img src="https://ui-avatars.com/api/?name=Nguy·ªÖn+VƒÉn+Khoa&background=FF7A00&color=fff" alt="Avatar">
      <div class="user-info">
        <h6>Nguy·ªÖn VƒÉn Khoa</h6>
        <small>Qu·∫£n l√Ω</small>
      </div>
    </div>
    <ul class="nav-menu">
      <li><a href="#" class="nav-link active"><i class="fas fa-gauge"></i> Dashboard</a></li>
      <li><a href="#" class="nav-link"><i class="fas fa-chart-pie"></i> B√°o c√°o t·ªïng h·ª£p</a></li>
      <li><a href="#" class="nav-link"><i class="fas fa-users"></i> Nh√¢n s·ª±</a></li>
      <li>
        <a href="#" class="nav-link"><i class="fas fa-warehouse"></i> Kho ph·ª• t√πng</a>
        <ul class="sub-menu">
          <li><a href="/template/manager/inventory/manage-parts.html" class="nav-link"><i class="fas fa-cogs"></i> Qu·∫£n l√Ω ph·ª• t√πng</a></li>
          <li><a href="/template/manager/inventory/low-stock.html" class="nav-link"><i class="fas fa-exclamation-triangle"></i> C·∫£nh b√°o t·ª´ Staff</a></li>
          <li><a href="/template/manager/inventory/restock.html" class="nav-link"><i class="fas fa-shopping-cart"></i> Nh·∫≠p kho</a></li>
        </ul>
      </li>
      <li><a href="#" class="nav-link"><i class="fas fa-dollar-sign"></i> Doanh thu</a></li>
      <li><a href="#" class="nav-link"><i class="fas fa-cog"></i> C√†i ƒë·∫∑t h·ªá th·ªëng</a></li>
    </ul>
    <button class="logout-btn" onclick="logout()">
      <i class="fas fa-sign-out-alt"></i> ƒêƒÉng xu·∫•t
    </button>
  </aside>

  <!-- Header -->
  <header class="main-header">
    <div class="search-box">
      <i class="fas fa-search"></i>
      <input type="text" placeholder="T√¨m ki·∫øm ph·ª• t√πng...">
    </div>
    <div class="d-flex align-items-center">
      <div class="dropdown me-3 position-relative">
        <button class="notification-btn" id="notifDropdown" data-bs-toggle="dropdown" aria-expanded="false">
          <i class="fas fa-bell"></i>
          <span class="notification-badge">3</span>
        </button>
        <ul class="dropdown-menu dropdown-menu-end notification-dropdown shadow-lg border-0 p-0" aria-labelledby="notifDropdown">
          <li class="dropdown-header py-3 px-3 border-bottom bg-light fw-semibold text-dark">
            Th√¥ng b√°o kho
          </li>
          <li><a href="#" class="dropdown-item">
            <div class="d-flex align-items-start">
              <div class="notif-icon bg-warning text-white me-3"><i class="fas fa-box"></i></div>
              <div>
                <strong>L·ªçc nh·ªõt s·∫Øp h·∫øt</strong>
                <div class="small text-muted">C√≤n 5 c√°i trong kho.</div>
                <div class="notif-time">10 ph√∫t tr∆∞·ªõc</div>
              </div>
            </div>
          </a></li>
          <li><a href="#" class="dropdown-item">
            <div class="d-flex align-items-start">
              <div class="notif-icon bg-success text-white me-3"><i class="fas fa-check"></i></div>
              <div>
                <strong>Nh·∫≠p kho th√†nh c√¥ng</strong>
                <div class="small text-muted">100 bugi m·ªõi.</div>
                <div class="notif-time">1 gi·ªù tr∆∞·ªõc</div>
              </div>
            </div>
          </a></li>
          <li><hr class="dropdown-divider"></li>
          <li><a href="#" class="dropdown-item text-center text-primary fw-semibold view-all">Xem t·∫•t c·∫£</a></li>
        </ul>
      </div>
      <div class="dropdown user-menu">
        <a href="#" class="d-flex align-items-center text-decoration-none dropdown-toggle"
           id="userDropdown" data-bs-toggle="dropdown" aria-expanded="false">
          <img src="https://ui-avatars.com/api/?name=K&background=FF7A00&color=fff"
               alt="Avatar" class="rounded-circle me-2" width="40" height="40">
          <span class="fw-semibold text-dark d-none d-md-inline">Nguy·ªÖn VƒÉn Khoa</span>
        </a>
        <ul class="dropdown-menu dropdown-menu-end shadow-lg border-0 mt-2" aria-labelledby="userDropdown">
          <li><a class="dropdown-item" href="#"><i class="fas fa-user me-2 text-primary"></i> H·ªì s∆° c√° nh√¢n</a></li>
          <li><a class="dropdown-item" href="#"><i class="fas fa-cog me-2 text-secondary"></i> C√†i ƒë·∫∑t</a></li>
          <li><hr class="dropdown-divider"></li>
          <li><a class="dropdown-item text-danger" href="#" onclick="logout()"><i class="fas fa-sign-out-alt me-2"></i> ƒêƒÉng xu·∫•t</a></li>
        </ul>
      </div>
    </div>
  </header>

  <!-- Main -->
  <main class="main-content">
    <div class="d-flex justify-content-between align-items-center mb-3">
      <h1 class="page-title mb-0">Qu·∫£n l√Ω ph·ª• t√πng üõ†Ô∏è</h1>
      <nav class="breadcrumb mb-0">
        <span><a href="#" class="text-primary text-decoration-none">Dashboard</a></span>
        <span class="mx-2 text-muted">/</span>
        <a href="/inventory/manage-parts.html" class="text-muted breadcrumb-link">Qu·∫£n l√Ω ph·ª• t√πng</a>
      </nav>
    </div>

    <div class="content-card">
      <div class="content-card-header">
        <h5>Danh s√°ch ph·ª• t√πng</h5>
        <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#addPartModal">
          <i class="fas fa-plus"></i> Th√™m ph·ª• t√πng
        </button>
      </div>

      <table class="custom-table">
        <thead>
          <tr>
            <th>M√£ ph·ª• t√πng</th>
            <th>T√™n ph·ª• t√πng</th>
            <th>S·ªë l∆∞·ª£ng</th>
            <th>Gi√° (VND)</th>
            <th>Ng∆∞·ª°ng c·∫£nh b√°o</th>
            <th>H√†nh ƒë·ªông</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>PT001</td>
            <td>L·ªçc nh·ªõt</td>
            <td>10</td>
            <td>150,000</td>
            <td>5</td>
            <td>
              <button class="btn btn-sm btn-warning me-1" data-bs-toggle="modal" data-bs-target="#editPartModal"
                      onclick="loadPartData('PT001', 'L·ªçc nh·ªõt', 10, 150000, 5)">
                <i class="fas fa-edit"></i>
              </button>
              <button class="btn btn-sm btn-danger" onclick="deletePart('PT001')">
                <i class="fas fa-trash"></i>
              </button>
            </td>
          </tr>
          <tr>
            <td>PT002</td>
            <td>Bugi</td>
            <td>50</td>
            <td>80,000</td>
            <td>10</td>
            <td>
              <button class="btn btn-sm btn-warning me-1" data-bs-toggle="modal" data-bs-target="#editPartModal"
                      onclick="loadPartData('PT002', 'Bugi', 50, 80000, 10)">
                <i class="fas fa-edit"></i>
              </button>
              <button class="btn btn-sm btn-danger" onclick="deletePart('PT002')">
                <i class="fas fa-trash"></i>
              </button>
            </td>
          </tr>
          <tr>
            <td>PT003</td>
            <td>D·∫ßu 5W30</td>
            <td>5</td>
            <td>500,000</td>
            <td>3</td>
            <td>
              <button class="btn btn-sm btn-warning me-1" data-bs-toggle="modal" data-bs-target="#editPartModal"
                      onclick="loadPartData('PT003', 'D·∫ßu 5W30', 5, 500000, 3)">
                <i class="fas fa-edit"></i>
              </button>
              <button class="btn btn-sm btn-danger" onclick="deletePart('PT003')">
                <i class="fas fa-trash"></i>
              </button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- Modal Th√™m ph·ª• t√πng -->
    <div class="modal fade" id="addPartModal" tabindex="-1" aria-labelledby="addPartModalLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="addPartModalLabel">Th√™m ph·ª• t√πng m·ªõi</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            <form id="addPartForm">
              <div class="mb-3">
                <label for="partCode" class="form-label">M√£ ph·ª• t√πng</label>
                <input type="text" class="form-control" id="partCode" value="Auto-generated" disabled>
              </div>
              <div class="mb-3">
                <label for="partName" class="form-label">T√™n ph·ª• t√πng</label>
                <input type="text" class="form-control" id="partName" required>
              </div>
              <div class="mb-3">
                <label for="partQuantity" class="form-label">S·ªë l∆∞·ª£ng</label>
                <input type="number" class="form-control" id="partQuantity" required min="0">
              </div>
              <div class="mb-3">
                <label for="partPrice" class="form-label">Gi√° (VND)</label>
                <input type="number" class="form-control" id="partPrice" required min="0">
              </div>
              <div class="mb-3">
                <label for="partThreshold" class="form-label">Ng∆∞·ª°ng c·∫£nh b√°o</label>
                <input type="number" class="form-control" id="partThreshold" required min="0">
              </div>
            </form>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">H·ªßy</button>
            <button type="button" class="btn btn-primary" onclick="addPart()">L∆∞u</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Modal Ch·ªânh s·ª≠a ph·ª• t√πng -->
    <div class="modal fade" id="editPartModal" tabindex="-1" aria-labelledby="editPartModalLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="editPartModalLabel">Ch·ªânh s·ª≠a ph·ª• t√πng</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            <form id="editPartForm">
              <div class="mb-3">
                <label for="editPartCode" class="form-label">M√£ ph·ª• t√πng</label>
                <input type="text" class="form-control" id="editPartCode" disabled>
              </div>
              <div class="mb-3">
                <label for="editPartName" class="form-label">T√™n ph·ª• t√πng</label>
                <input type="text" class="form-control" id="editPartName" required>
              </div>
              <div class="mb-3">
                <label for="editPartQuantity" class="form-label">S·ªë l∆∞·ª£ng</label>
                <input type="number" class="form-control" id="editPartQuantity" required min="0">
              </div>
              <div class="mb-3">
                <label for="editPartPrice" class="form-label">Gi√° (VND)</label>
                <input type="number" class="form-control" id="editPartPrice" required min="0">
              </div>
              <div class="mb-3">
                <label for="editPartThreshold" class="form-label">Ng∆∞·ª°ng c·∫£nh b√°o</label>
                <input type="number" class="form-control" id="editPartThreshold" required min="0">
              </div>
            </form>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">H·ªßy</button>
            <button type="button" class="btn btn-primary" onclick="updatePart()">C·∫≠p nh·∫≠t</button>
          </div>
        </div>
      </div>
    </div>
  </main>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    function logout() {
      if (confirm('ƒêƒÉng xu·∫•t kh·ªèi h·ªá th·ªëng qu·∫£n l√Ω?')) {
        document.body.style.opacity = '0';
        setTimeout(() => {
          alert('ƒê√£ ƒëƒÉng xu·∫•t th√†nh c√¥ng!');
          window.location.href = "login.html";
        }, 500);
      }
    }

    function addPart() {
      alert('Ph·ª• t√πng ƒë√£ ƒë∆∞·ª£c th√™m!');
      document.getElementById('addPartForm').reset();
      document.querySelector('#addPartModal .btn-close').click();
    }

    function loadPartData(code, name, quantity, price, threshold) {
      document.getElementById('editPartCode').value = code;
      document.getElementById('editPartName').value = name;
      document.getElementById('editPartQuantity').value = quantity;
      document.getElementById('editPartPrice').value = price;
      document.getElementById('editPartThreshold').value = threshold;
    }

    function updatePart() {
      alert('Ph·ª• t√πng ƒë√£ ƒë∆∞·ª£c c·∫≠p nh·∫≠t!');
      document.querySelector('#editPartModal .btn-close').click();
    }

    function deletePart(partCode) {
      if (confirm(`X√≥a ph·ª• t√πng ${partCode}?`)) {
        alert(`Ph·ª• t√πng ${partCode} ƒë√£ ƒë∆∞·ª£c x√≥a!`);
      }
    }
  </script>
</body>
</html>